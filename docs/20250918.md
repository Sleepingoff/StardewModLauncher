# 📘 Stardew Mod Launcher – 개발 고민 정리

## 1. 성능 문제

- **문제**: 모드가 100개 이상일 때 프로그램이 `응답없음` 상태 발생.
- **원인**:
  - 모든 모드 체크박스를 DOM에 한 번에 그려서 브라우저가 레이아웃/리플로우에 과부하.
  - 체크박스마다 이벤트 리스너를 개별 등록.
- **해결 방향**:
  - **탭 기반 UI** → 상위 폴더를 탭으로 구분.
  - **페이지네이션/더보기 버튼** → 폴더 안 모드를 20~30개 단위로 나눠서 표시.
  - **이벤트 위임** → 부모 컨테이너 하나에서 이벤트 처리.
  - **장기적으로 React + react-window**로 가상 스크롤링 적용.

---

## 2. 폴더 구조 & UI 문제

- **문제**: Mods 폴더 안에 “폴더”와 “모드(manifest.json 있는 폴더)”가 뒤섞여 있음.
- **해결 규칙**:
  - `manifest.json` 있으면 → **모드(체크박스)**
  - 없으면 → **폴더(탭 또는 버튼)**
- **UI 설계**:
  - Mods 루트 바로 아래 모드 → “공통” 탭에 표시.
  - 상위 폴더 → 탭으로 전환.
  - 폴더 안 폴더 → 탐색기식 버튼 or 서브탭.

---

## 3. 동기화 & 프리셋

- **문제**: 동기화 시 Mods 폴더 구조가 flatten 되거나 망가질 위험.
- **해결**:

  - modStates에 `uniqueId`, `enabled` 외에 `path`(상대 경로)도 기록.
  - Apply/Reset 시 원래 경로를 유지하면서 반영.

- **프리셋 관리 UX**:
  - **프리셋 생성(Create)** → 새로운 이름으로 저장.
  - **프리셋 수정(Update)** → 선택한 프리셋 덮어쓰기.
  - **다른 이름으로 저장(Duplicate)** → 기존 프리셋 복사.
  - **임시 프리셋 (TEMP_SYNC)** → 동기화 시 자동 생성, 필요 시 다른 이름으로 저장 가능.

---

## 4. 확장 기능 리스트

1. **탭 기반 UI**

   - 상위 폴더별 탭 구분
   - 루트 모드 → “공통” 탭 표시

2. **페이지네이션 / 더보기 버튼**

   - 모드가 많은 폴더는 20~30개 단위로 나눠서 표시

3. **폴더 구조 보존**

   - modStates에 상대 경로 저장 → Apply/Reset 시 원래 위치 유지

4. **임시 프리셋 자동 생성**

   - 동기화 시 현재 Mods 상태를 기반으로 TEMP_SYNC 프리셋 생성

5. **모드 경로 변경 대응**

   - UniqueID 기준으로 동일 모드 인식
   - 경로가 바뀌면 path만 갱신

6. **UX 개선**
   - 마지막 열었던 탭/페이지 기억
   - 검색/정렬 기능
   - ~~모드 카운터(`활성화 / 총 개수`) 표시~~ : 2025-09-16 v0.1.4

---

## 5. 사용자 설정 사이드바

- **목적**: 프리셋 관리와 별도로, 사용자 개인 설정을 통합 관리.

### 사이드바 항목

- **기본 설정**

  - SMAPI 경로 입력 & 저장
  - 내 모드 폴더 열기 버튼

- **프리셋 관련**

  - 새로운 모드가 들어올 때:
    - [ ] 기존 프리셋에서 자동 활성화
  - 새로운 프리셋 생성:
    - [ ] 모든 모드 자동 활성화
  - 임시 프리셋:
    - [ ] 동기화 시 자동 생성

- **추가 설정**
  - [ ]언어 (한국어 / 영어)
  - [ ] 다크 모드/라이트 모드

---

## 6. React 마이그레이션 고민

- **React 선택 이유**

  - 상태 관리 단순화 (modStates → React state).
  - UI 컴포넌트화 (탭, 리스트, 프리셋 관리).
  - 가상 스크롤 라이브러리 사용 가능.

- **Next.js 대신 React**

  - SSR, API 라우트 필요 없음 → Electron 환경엔 React가 적합.

- **마이그레이션 전략**
  - 현재 저장소에 React 의존성 추가 (`react`, `react-dom`, `@vitejs/plugin-react`).
  - `feature/react-migration` 브랜치 생성 후 점진적 전환.
  - 기존 바닐라 렌더링 코드 → React 컴포넌트로 하나씩 옮기기.
  - 상태 관리 리팩터링 → `useReducer` → 필요시 Zustand/Recoil.
  - 장기적으로 react-window로 성능 최적화.
